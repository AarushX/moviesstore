{% extends 'base.html' %}
{% block content %}
<section class="ms-hero">
  <div class="container py-4">
    <div class="d-flex justify-content-between align-items-center">
      <h2>Petitions</h2>
      {% if user.is_authenticated %}
      <a class="btn btn-primary" href="{% url 'petitions:create' %}">New Petition</a>
      {% else %}
      <a class="btn btn-outline-primary" href="{% url 'accounts.login' %}">Login to create</a>
      {% endif %}
    </div>
    <hr/>
    {% if petitions %}
    <div class="list-group">
      {% for p in petitions %}
      <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" href="{% url 'petitions:detail' p.pk %}">
        <div>
          <div class="fw-bold">{{ p.title }}</div>
          <small class="text-muted">Movie: {{ p.requested_movie_title }} · by {{ p.created_by.username }} · {{ p.created_at|date:'Y-m-d H:i' }}</small>
        </div>
        <span class="badge bg-success rounded-pill">Yes {{ p.yes_count }}</span>
      </a>
      {% endfor %}
    </div>
    {% else %}
    <p>No petitions yet.</p>
    {% endif %}
  </div>
  </section>
{% endblock %}

